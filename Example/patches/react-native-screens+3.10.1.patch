diff --git a/node_modules/react-native-screens/ios/RNSScreen.m b/node_modules/react-native-screens/ios/RNSScreen.m
index e0dd2ba..8061e21 100644
--- a/node_modules/react-native-screens/ios/RNSScreen.m
+++ b/node_modules/react-native-screens/ios/RNSScreen.m
@@ -706,6 +706,7 @@ - (void)viewDidDisappear:(BOOL)animated
   _shouldNotify = YES;
 
   [self traverseForScrollView:self.view];
+  [RNSSharedElementAnimator notifyAboutViewDidDisappear:self.view];
 }
 
 - (void)traverseForScrollView:(UIView *)view
@@ -747,24 +748,26 @@ - (void)setupProgressNotification
 {
   if (self.transitionCoordinator != nil) {
     _fakeView.alpha = 0.0;
-    NSMutableArray<NSArray *> *sharedElements = nil;
+    NSMutableArray<SharedElementConfig *> *sharedElements;
     if (_closing) {
-      sharedElements = [RNSSharedElementAnimator prepareSharedElementsArrayForVC:self];
+      UIViewController *targetViewController = [self.transitionCoordinator 
+        viewControllerForKey:UITransitionContextToViewControllerKey];
+      sharedElements = [RNSSharedElementAnimator getSharedElementsForCurrentTransition:self 
+                                                                  targetViewController:targetViewController];
+      [RNSScreen asignEndingValuesWithTransitionContext:self.transitionCoordinator
+                                         sharedElements:sharedElements
+                                           goingForward:_goingForward];
     }
 
     [self.transitionCoordinator
         animateAlongsideTransition:^(id<UIViewControllerTransitionCoordinatorContext> _Nonnull context) {
           [[context containerView] addSubview:self->_fakeView];
           self->_fakeView.alpha = 1.0;
-          if (self->_closing) {
-            for (NSArray *sharedElement in sharedElements) {
-              UIView *endingView = sharedElement[1];
-              // we add all views immediately, otherwise it won't work correctly
-              [[context containerView] addSubview:endingView];
+          if (self->_closing && sharedElements != nil) {
+            // right order is important, first parent then children, to keep right z-index order
+            for (SharedElementConfig *sharedElement in sharedElements) {
+              [[context containerView] addSubview:sharedElement.fromView];
             }
-            [RNSScreen asignEndingValuesWithTransitionContext:context
-                                               sharedElements:sharedElements
-                                                 goingForward:self->_goingForward];
           }
 
           self->_animationTimer = [CADisplayLink displayLinkWithTarget:self selector:@selector(handleAnimation)];
@@ -792,63 +795,53 @@ - (void)notifyTransitionProgress:(double)progress closing:(BOOL)closing goingFor
   [((RNSScreenView *)self.view) notifyTransitionProgress:progress closing:closing goingForward:goingForward];
 }
 
-+ (void)asignEndingValuesWithTransitionContext:(id<UIViewControllerTransitionCoordinatorContext> _Nonnull)context
-                                sharedElements:(NSMutableArray<NSArray *> *)sharedElements
++ (void)asignEndingValuesWithTransitionContext:(id<UIViewControllerTransitionCoordinator> _Nonnull)context
+                                sharedElements:(NSMutableArray<SharedElementConfig *> *)sharedElements
                                   goingForward:(BOOL)goingForward
 {
   UIViewController *toViewController = [context viewControllerForKey:UITransitionContextToViewControllerKey];
   [toViewController.view setNeedsLayout];
   [toViewController.view layoutIfNeeded];
-  UIViewController *fromViewController = [context viewControllerForKey:UITransitionContextFromViewControllerKey];
 
-  NSObject<RNSSharedElementTransitionsDelegate> *reaDelegate = [RNSSharedElementAnimator getDelegate];
-  // we find the lowest VCs since they are the ones from which the center should be converted
-  // to transition's container
-  UIViewController *lowestFromVC = fromViewController;
-  while ([[lowestFromVC childViewControllers] count] > 0) {
-    lowestFromVC = lowestFromVC.childViewControllers[lowestFromVC.childViewControllers.count - 1];
-  }
-  UIViewController *lowestToVC = toViewController;
-  while ([[lowestToVC childViewControllers] count] > 0) {
-    lowestToVC = lowestToVC.childViewControllers[lowestToVC.childViewControllers.count - 1];
-  }
-  for (NSArray *sharedElement in sharedElements) {
-    UIView *startingView = sharedElement[0];
-    UIView *endingViewParent = sharedElement[2];
-    UIView *endingView = sharedElement[1];
+  NSObject<RNSSharedElementTransitionsDelegate> *reanimatedDelegate = [RNSSharedElementAnimator getDelegate];
+  for (SharedElementConfig *sharedElement in sharedElements) {
+    UIView *startingView = sharedElement.fromView;
+    UIView *startingViewParent = sharedElement.fromContainer;
+    UIView *endingView = sharedElement.toView;
   
-    [reaDelegate reanimatedMockTransitionWithConverterView:[context containerView]
+    [reanimatedDelegate reanimatedMockTransitionWithConverterView:[context containerView]
                                                   fromView:startingView
-                                         fromViewConverter:startingView.superview
+                                         fromViewConverter:startingViewParent
                                                     toView:endingView
-                                           toViewConverter:endingViewParent
+                                           toViewConverter:endingView.superview
                                             transitionType:@"sharedElementTransition"];
   }
-  [reaDelegate reanimatedMockTransitionWithConverterView:[context containerView]
-                                                fromView:fromViewController.view
-                                       fromViewConverter:fromViewController.view
-                                                  toView:nil
-                                         toViewConverter:nil
-                                          transitionType:goingForward ? @"hiding" : @"exiting"];
-  [reaDelegate reanimatedMockTransitionWithConverterView:[context containerView]
-                                                fromView:toViewController.view
-                                       fromViewConverter:toViewController.view
-                                                  toView:nil
-                                         toViewConverter:nil
-                                          transitionType:goingForward ? @"entering" : @"reappearing"];
-}
-
-- (void)cleanupAfterTransitionWithSharedElements:(NSMutableArray<NSArray *> *)sharedElements
-{
-  for (NSArray *sharedElement in sharedElements) {
-    UIView *endingView = sharedElement[1];
-    [endingView removeFromSuperview];
-    UIView *endingContainer = sharedElement[2];
-    int index = [sharedElement[3] intValue];
-    [endingContainer insertSubview:endingView atIndex:index];
-    endingView.frame = [sharedElement[4] CGRectValue];
-    UIView *startingView = sharedElement[0];
-    startingView.hidden = NO;
+// TODO: screen transition animation
+//  [reanimatedDelegate reanimatedMockTransitionWithConverterView:[context containerView]
+//                                                fromView:fromViewController.view
+//                                       fromViewConverter:fromViewController.view
+//                                                  toView:nil
+//                                         toViewConverter:nil
+//                                          transitionType:goingForward ? @"hiding" : @"exiting"];
+//  [reanimatedDelegate reanimatedMockTransitionWithConverterView:[context containerView]
+//                                                fromView:toViewController.view
+//                                       fromViewConverter:toViewController.view
+//                                                  toView:nil
+//                                         toViewConverter:nil
+//                                          transitionType:goingForward ? @"entering" : @"reappearing"];
+}
+
+- (void)cleanupAfterTransitionWithSharedElements:(NSMutableArray<SharedElementConfig *> *)sharedElements
+{
+  for (SharedElementConfig *sharedElement in sharedElements) {
+      UIView *startingView = sharedElement.fromView;
+      [startingView removeFromSuperview];
+      UIView *startContainer = sharedElement.fromContainer;
+      int index = sharedElement.fromViewIndex;
+      [startContainer insertSubview:startingView atIndex:index];
+      startingView.frame = sharedElement.fromViewFrame;
+      UIView *endingView = sharedElement.toView;
+      endingView.hidden = NO;
   }
 
   [self->_animationTimer setPaused:YES];
diff --git a/node_modules/react-native-screens/ios/RNSSharedElementAnimator.h b/node_modules/react-native-screens/ios/RNSSharedElementAnimator.h
index 6f1d46c..90abaa1 100644
--- a/node_modules/react-native-screens/ios/RNSSharedElementAnimator.h
+++ b/node_modules/react-native-screens/ios/RNSSharedElementAnimator.h
@@ -1,11 +1,42 @@
+@interface SharedViewConfig: NSObject;
+
+- (void)setView:(UIView *)view;
+- (UIView *)getView;
+
+@property NSNumber *viewTag;
+@property BOOL toRemove;
+
+@end
+
+@interface SharedElementConfig : NSObject;
+
+@property UIView *fromView;
+@property UIView *toView;
+@property UIView *fromContainer;
+@property int fromViewIndex; 
+@property CGRect fromViewFrame;
+
+-(instancetype)initWithFromView:(UIView *)fromView 
+                         toView:(UIView *)toView 
+                  fromContainer:(UIView *)fromContainer
+                  fromViewFrame:(CGRect)fromViewFrame;
+
+@end
+
 @protocol RNSSharedElementTransitionsDelegate <NSObject>
 
+@property NSMutableDictionary<NSString *, NSMutableArray<SharedViewConfig *>*> * sharedTransitionsItems;
+@property NSMutableArray<NSString *> * iterationOrder;
+
+- (void)afterPreparingCallback;
 - (void)reanimatedMockTransitionWithConverterView:(UIView *)converter
                                          fromView:(UIView *)fromView
                                 fromViewConverter:(UIView *)startingViewConverter
                                            toView:(UIView *)toView
                                   toViewConverter:(UIView *)toViewConverter
                                    transitionType:(NSString *)transitionType;
+- (void)notifyAboutViewDidDisappear:(UIView *)screeen;
+- (void)makeSnapshot:(UIView *)view withViewController:(UIView *)viewController;
 
 @end
 
@@ -13,6 +44,8 @@
 
 + (void)setDelegate:(NSObject<RNSSharedElementTransitionsDelegate> *)delegate;
 + (NSObject<RNSSharedElementTransitionsDelegate> *)getDelegate;
-+ (NSMutableArray<NSArray *> *)prepareSharedElementsArrayForVC:(UIViewController *)vc;
++ (NSMutableArray<SharedElementConfig *> *)getSharedElementsForCurrentTransition:(UIViewController *)currentViewController 
+                                                            targetViewController:(UIViewController *)targetViewController;
++ (void)notifyAboutViewDidDisappear:(UIView *)screeen;
 
 @end
diff --git a/node_modules/react-native-screens/ios/RNSSharedElementAnimator.m b/node_modules/react-native-screens/ios/RNSSharedElementAnimator.m
index 4c82bf4..f637ce5 100644
--- a/node_modules/react-native-screens/ios/RNSSharedElementAnimator.m
+++ b/node_modules/react-native-screens/ios/RNSSharedElementAnimator.m
@@ -3,6 +3,25 @@
 
 #import <React/RCTUIManager.h>
 
+@implementation SharedElementConfig 
+
+-(instancetype)initWithFromView:(UIView *)fromView 
+                         toView:(UIView *)toView 
+                  fromContainer:(UIView *)fromContainer
+                  fromViewFrame:(CGRect)fromViewFrame
+{
+  if (self = [super init]) {
+    _fromView = fromView;
+    _toView = toView;
+    _fromContainer = fromContainer;
+    _fromViewFrame = fromViewFrame;
+  }
+
+  return self;
+}
+
+@end
+
 @implementation RNSSharedElementAnimator
 
 static NSObject<RNSSharedElementTransitionsDelegate> *_delegate;
@@ -17,48 +36,74 @@ + (void)setDelegate:(NSObject<RNSSharedElementTransitionsDelegate> *)delegate
   return _delegate;
 }
 
-+ (NSMutableArray<NSArray *> *)prepareSharedElementsArrayForVC:(UIViewController *)vc
++ (NSMutableArray<SharedElementConfig *> *)getSharedElementsForCurrentTransition:(UIViewController *)currentViewController 
+                                                            targetViewController:(UIViewController *)targetViewController
 {
-  NSMutableArray<NSArray *> *sharedElementsArray = [NSMutableArray new];
+  NSMutableArray<SharedElementConfig *> *sharedElementsArray = [NSMutableArray new];
+  RNSScreenView *screenView = (RNSScreenView *)currentViewController.view;
 
-  NSArray<__kindof UIViewController *> *viewControllers = vc.navigationController.viewControllers;
-  RNSScreenView *screenView = (RNSScreenView *)vc.view;
-
-  for (NSDictionary *sharedElementDict in screenView.sharedElements) {
-    UIView *fromView = [[screenView bridge].uiManager viewForNativeID:sharedElementDict[@"fromID"]
-                                                          withRootTag:[screenView rootTag]];
-    UIView *toView = [[screenView bridge].uiManager viewForNativeID:sharedElementDict[@"toID"]
-                                                        withRootTag:[screenView rootTag]];
+  RCTUIManager *uiManager = [screenView bridge].uiManager;
+  NSNumber *rootTag = screenView.rootTag;
+  for (NSString *key in [_delegate.iterationOrder reverseObjectEnumerator]) {
+    NSArray<SharedViewConfig *> *sharedViewConfigs = _delegate.sharedTransitionsItems[key];
+    UIView *fromView, *toView;
+    for (SharedViewConfig *sharedViewConfig in sharedViewConfigs) {
+      UIView *view = [uiManager viewForReactTag:sharedViewConfig.viewTag];
+      if (view == nil) {
+        view = [sharedViewConfig getView];
+      }
+      else {
+        [sharedViewConfig setView:view];
+      }
+      UIViewController *viewViewController = view.reactViewController;
+      if (viewViewController == currentViewController) {
+        fromView = view;
+      }
+      if (viewViewController == targetViewController) {
+        toView = view;
+      }
+    }
 
-    if (fromView == nil || toView == nil) {
-      break;
+    BOOL isAnyNull = fromView == nil || toView == nil;
+    BOOL hasCorrectRootTag = [fromView rootTag] == rootTag && [toView rootTag] == rootTag;
+    if (isAnyNull || !hasCorrectRootTag) {
+      continue;
     }
 
-    UIView *start;
-    UIView *end;
-    if ([viewControllers containsObject:vc]) {
-      // we are in previous vc and going forward
-      start = fromView;
-      end = toView;
-    } else {
-      // we are in next vc and going back
-      start = toView;
-      end = fromView;
+    if (fromView != nil && toView != nil) {
+      SharedElementConfig *sharedElementConfig = [
+        [SharedElementConfig alloc] 
+          initWithFromView:fromView
+                    toView:toView
+             fromContainer:fromView.reactSuperview
+             fromViewFrame:fromView.frame
+      ];
+      [sharedElementsArray addObject:sharedElementConfig];
     }
+  }
   
-    // we reparent starting view and animate it, then reparent it back after the transition
-    UIView *endContainer = end.reactSuperview;
-    int endIndex = (int)[[endContainer reactSubviews] indexOfObject:end];
-    CGRect endFrame = end.frame;
-    [end removeFromSuperview];
+  // we reparent starting view and animate it, then reparent it back after the transition
+  for (SharedElementConfig *sharedElementConfig in [sharedElementsArray reverseObjectEnumerator]) {
+    UIView *start = sharedElementConfig.fromView;
+    UIView *end = sharedElementConfig.toView;
+    [_delegate makeSnapshot:start withViewController:sharedElementConfig.fromContainer];
+    [_delegate makeSnapshot:end withViewController:end.superview];
     
-    start.hidden = YES;
-    if (start != nil && end != nil) {
-      [sharedElementsArray addObject:@[ start, end, endContainer, @(endIndex), @(endFrame) ]];
-    }
+    UIView *startContainer = start.reactSuperview;
+    int startIndex = (int)[[startContainer reactSubviews] indexOfObject:start];
+    [start removeFromSuperview];
+    end.hidden = YES;
+    sharedElementConfig.fromViewIndex = startIndex;
   }
   
+  [_delegate afterPreparingCallback];
+
   return sharedElementsArray;
 }
 
++ (void)notifyAboutViewDidDisappear:(UIView *)screeen 
+{
+  [_delegate notifyAboutViewDidDisappear:screeen];
+}
+
 @end
diff --git a/node_modules/react-native-screens/src/native-stack/views/NativeStackView.tsx b/node_modules/react-native-screens/src/native-stack/views/NativeStackView.tsx
index d0aa06b..1606d86 100644
--- a/node_modules/react-native-screens/src/native-stack/views/NativeStackView.tsx
+++ b/node_modules/react-native-screens/src/native-stack/views/NativeStackView.tsx
@@ -157,7 +157,6 @@ const RouteView = ({
     nativeBackButtonDismissalEnabled = false,
     replaceAnimation = 'pop',
     screenOrientation,
-    sharedElements,
     stackAnimation,
     statusBarAnimation,
     statusBarColor,
@@ -209,7 +208,6 @@ const RouteView = ({
       nativeBackButtonDismissalEnabled={nativeBackButtonDismissalEnabled}
       replaceAnimation={replaceAnimation}
       screenOrientation={screenOrientation}
-      sharedElements={sharedElements}
       stackAnimation={stackAnimation}
       stackPresentation={stackPresentation}
       statusBarAnimation={statusBarAnimation}
